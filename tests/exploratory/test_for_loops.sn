// Test 13: C-style for loops
fn main(): int =>
    // Basic for loop
    print("Basic for 0-4:\n")
    for var i: int = 0; i < 5; i++ =>
        print($"  {i}\n")

    // Decrementing for
    print("\nDecrementing 5-1:\n")
    for var j: int = 5; j >= 1; j-- =>
        print($"  {j}\n")

    // Step by 2
    print("\nStep by 2:\n")
    for var k: int = 0; k <= 10; k = k + 2 =>
        print($"  {k}\n")

    // Step by 3
    print("\nStep by 3:\n")
    for var m: int = 0; m < 10; m = m + 3 =>
        print($"  {m}\n")

    // For with break
    print("\nFor with break at 5:\n")
    for var n: int = 0; n < 10; n++ =>
        if n == 5 =>
            print("  breaking\n")
            break
        print($"  {n}\n")

    // For with continue
    print("\nFor with continue (skip multiples of 3):\n")
    for var p: int = 1; p <= 10; p++ =>
        if p % 3 == 0 =>
            continue
        print($"  {p}\n")

    // Nested for loops
    print("\nNested for (3x3 table):\n")
    for var r: int = 1; r <= 3; r++ =>
        for var c: int = 1; c <= 3; c++ =>
            var product: int = r * c
            print($"  {r}x{c}={product}")
        print("\n")

    // For that doesn't execute
    print("\nFor with no iterations:\n")
    for var z: int = 10; z < 5; z++ =>
        print("should not print\n")
    print("after zero-iteration for\n")

    // For with existing variable (if supported)
    var sum: int = 0
    for var x: int = 1; x <= 5; x++ =>
        sum = sum + x
    print($"Sum 1-5: {sum}\n")

    return 0
