import "../../sdk/core/version"

fn testEmpty(a: str, b: str): void =>
    print($"  a='{a}' (len={a.length}), b='{b}' (len={b.length})\n")
    var cmp: int = _comparePrerelease(a, b)
    print($"  _comparePrerelease = {cmp}\n")

fn main(): int =>
    print("=== Debug string parameter passing ===\n")

    # Direct call
    print("Direct call:\n")
    var s1: str = ""
    var s2: str = ""
    testEmpty(s1, s2)
    
    # From loop context
    print("\nFrom loop context:\n")
    var constraints: str = ">=1.0.0, <2.0.0"
    var parts: str[] = constraints.split(",")
    var i: int = 0
    while i < parts.length =>
        var part: str = parts[i].trim()
        if part.startsWith("<") =>
            # Create empty strings inside loop
            var ls1: str = ""
            var ls2: str = ""
            testEmpty(ls1, ls2)
        i = i + 1

    return 0
