// Code Generation Test: Global with shared function
//
// Tests that a shared function uses the caller's arena for allocations,
// and can access global string variables from __main_arena__.

var greeting: str = "Hello"

shared fn append_world(): str =>
    // shared function uses caller's arena for allocations
    // global 'greeting' is in __main_arena__, accessed via parent-walking
    return greeting + " World"

fn main(): int =>
    println("Global with shared function test:")
    var result: str = append_world()
    println(result)
    println("PASS")
    return 0
