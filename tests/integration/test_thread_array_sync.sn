// Test: Sync list pattern [r1, r2, r3]!
// Spawns multiple threads into separate variables, then syncs all at once

fn compute_a(): int =>
    return 10

fn compute_b(): int =>
    return 20

fn compute_c(): int =>
    return 30

fn main(): void =>
    // Spawn three threads
    var r1: int = &compute_a()
    var r2: int = &compute_b()
    var r3: int = &compute_c()

    // Sync all at once using sync list syntax
    [r1, r2, r3]!

    // All results should now be available
    print($"r1: {r1}\n")
    print($"r2: {r2}\n")
    print($"r3: {r3}\n")

    // Validate all results
    var sum: int = r1 + r2 + r3
    if sum == 60 =>
        print("SUCCESS: All array sync results correct\n")
    else =>
        print($"FAILURE: Expected sum 60, got {sum}\n")
