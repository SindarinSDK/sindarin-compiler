'shared' must be declared before 'fn', not after the parameter list
