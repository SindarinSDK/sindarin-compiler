# Sindarin Compiler Configuration
# ================================
# This file configures the C backend for the Sindarin compiler.
# The compiler searches for this file in the following locations:
#
#   1. $SINDARIN_CONFIG environment variable (if set)
#   2. <exe_dir>/sn.cfg (portable/development mode)
#   3. <exe_dir>/../etc/sindarin/sn.cfg (FHS-relative, package installs)
#   4. Platform-specific system paths:
#      - Linux:   /etc/sindarin/sn.cfg, /usr/local/etc/sindarin/sn.cfg
#      - macOS:   /usr/local/etc/sindarin/sn.cfg, /opt/homebrew/etc/sindarin/sn.cfg
#      - Windows: %LOCALAPPDATA%\Sindarin\sn.cfg, %ProgramFiles%\Sindarin\sn.cfg
#   5. Built-in defaults (if no config found)
#
# Priority: Environment variable > Config file > Default
#
# Backend Selection:
#   The C compiler backend is selected via SN_CC. If not set, the compiler
#   auto-detects based on platform (gcc on Linux, clang on macOS/Windows).
#
# Available backends: gcc, clang, tcc, clang-cl

# ==============================================================================
# Common Settings (all platforms/backends)
# ==============================================================================

# C compiler to use (gcc, clang, tcc, clang-cl)
# Leave empty for auto-detection
SN_CC=

# C standard (c99, c11, c17)
SN_STD=c99

# Additional compiler flags (added to all builds)
SN_CFLAGS=

# Additional linker flags
SN_LDFLAGS=

# Additional libraries to link
SN_LDLIBS=

# ==============================================================================
# Build Mode Flags
# ==============================================================================
# These are applied based on -g (debug) flag or release mode

# Release mode optimization flags
SN_RELEASE_CFLAGS=-O3 -flto

# Debug mode flags (used with -g)
SN_DEBUG_CFLAGS=-g -fsanitize=address -fno-omit-frame-pointer

# ==============================================================================
# Platform-Specific Notes
# ==============================================================================
#
# Linux (gcc/clang):
#   - Default backend: gcc
#   - ASAN works with both gcc and clang
#   - LTO works with both gcc and clang
#
# macOS (clang):
#   - Default backend: clang
#   - System clang is recommended
#   - LTO and ASAN fully supported
#
# Windows (clang via LLVM-MinGW):
#   - Default backend: clang (LLVM-MinGW toolchain)
#   - Native MSVC (cl.exe) is NOT supported (lacks GNU extensions)
#   - Use clang-cl for MSVC ABI compatibility if needed
#   - ASAN has limited support on Windows
#
# TinyCC (tcc):
#   - Fastest compilation, useful for rapid iteration
#   - Does not support: -flto, -fsanitize, -fno-omit-frame-pointer
#   - Limited optimization (-O2 max)
#
# ==============================================================================
# Environment Variable Overrides
# ==============================================================================
# All settings can be overridden via environment variables:
#   SN_CC, SN_STD, SN_CFLAGS, SN_LDFLAGS, SN_LDLIBS,
#   SN_RELEASE_CFLAGS, SN_DEBUG_CFLAGS
#
# Additional environment variables:
#   SINDARIN_CONFIG - Path to config file
#   SINDARIN_LIB    - Path to runtime library directory
#   SINDARIN_SDK    - Path to SDK standard library directory
#
# SDK Search Order:
#   The compiler searches for SDK modules (e.g., math, date, time) in:
#   1. Relative to the importing source file (current behavior)
#   2. $SINDARIN_SDK environment variable (if set)
#   3. <exe_dir>/sdk/ (development mode)
#   4. <exe_dir>/../share/sindarin/sdk/ (FHS-relative)
#   5. Platform-specific paths:
#      - Linux:   /usr/share/sindarin/sdk, /usr/local/share/sindarin/sdk
#      - macOS:   /opt/homebrew/share/sindarin/sdk
#      - Windows: %LOCALAPPDATA%\Sindarin\sdk, %ProgramFiles%\Sindarin\sdk
#   6. Compile-time default (for packaged installations)
