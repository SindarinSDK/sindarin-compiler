# Maintainer: Sindarin Project <https://github.com/SindarinSDK/sindarin-compiler>
# Arch Linux PKGBUILD for Sindarin
# Install with: makepkg -si

pkgname=sindarin
pkgver=${VERSION}
pkgrel=1
pkgdesc="A statically-typed procedural language that compiles to C"
arch=('x86_64')
url="https://github.com/SindarinSDK/sindarin-compiler"
license=('MIT')
depends=('gcc' 'zlib')
source=("https://github.com/SindarinSDK/sindarin-compiler/releases/download/${TAG}/sindarin-${VERSION}-linux-x64.tar.gz")
sha256sums=('${SHA256}')

package() {
    cd "$srcdir/sindarin-${VERSION}-linux-x64"

    # Install SDK root (contains binary, config, libs, headers, sdk modules)
    install -dm755 "$pkgdir/usr/lib/sindarin"
    cp -r lib/sindarin/* "$pkgdir/usr/lib/sindarin/"

    # Symlink binary into PATH
    install -dm755 "$pkgdir/usr/bin"
    ln -s ../lib/sindarin/sn "$pkgdir/usr/bin/sn"

    # Install license
    install -Dm644 LICENSE "$pkgdir/usr/share/licenses/$pkgname/LICENSE" 2>/dev/null || true
}
